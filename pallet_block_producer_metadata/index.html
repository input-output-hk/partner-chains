<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Pallet storing metadata for Partner Chain block producers."><title>pallet_block_producer_metadata - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-069232aa.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pallet_block_producer_metadata" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.0-nightly (2fd855fbf 2025-08-07)" data-channel="nightly" data-search-js="search-fa3e91e5.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-68b7e25d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../pallet_block_producer_metadata/index.html">pallet_<wbr>block_<wbr>producer_<wbr>metadata</a><span class="version">1.7.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#purpose-of-this-pallet" title="Purpose of this pallet">Purpose of this pallet</a></li><li><a href="#usage---pc-builders" title="Usage - PC Builders">Usage - PC Builders</a><ul><li><a href="#signing-command" title="Signing command">Signing command</a></li><li><a href="#benchmarking" title="Benchmarking">Benchmarking</a></li><li><a href="#rpc" title="RPC">RPC</a></li></ul></li><li><a href="#usage---pc-users" title="Usage - PC Users">Usage - PC Users</a></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>pallet_block_producer_metadata</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/pallet_block_producer_metadata/lib.rs.html#1-359">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Pallet storing metadata for Partner Chain block producers.</p>
<h3 id="purpose-of-this-pallet"><a class="doc-anchor" href="#purpose-of-this-pallet">§</a>Purpose of this pallet</h3>
<p>This pallet enables Partner Chain block producers to provide information about themselves that can
then be displayed by chain explorers and other tools to potential delegators looking for pools to
delegate to.</p>
<h3 id="usage---pc-builders"><a class="doc-anchor" href="#usage---pc-builders">§</a>Usage - PC Builders</h3>
<p>PC Builders wishing to include this pallet in their runtime should first define a <code>BlockProducerMetadata</code>
type for their runtime to use, eg.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>sidechain_domain::byte_string::BoundedString;
<span class="kw">use </span>sp_core::{Encode, ConstU32, Decode, MaxEncodedLen};

<span class="kw">type </span>MaxNameLength = ConstU32&lt;<span class="number">64</span>&gt;;
<span class="kw">type </span>MaxDescriptionLength = ConstU32&lt;<span class="number">512</span>&gt;;
<span class="kw">type </span>MaxUrlLength = ConstU32&lt;<span class="number">256</span>&gt;;

<span class="attr">#[derive(Encode, Decode, MaxEncodedLen)]
</span><span class="kw">pub struct </span>BlockProducerMetadata {
    <span class="kw">pub </span>name: BoundedString&lt;MaxNameLength&gt;,
    <span class="kw">pub </span>description: BoundedString&lt;MaxDescriptionLength&gt;,
    <span class="kw">pub </span>logo_url: BoundedString&lt;MaxUrlLength&gt;
}</code></pre></div>
<p>This type can be arbitrary to allow PC Builders to include any data that would be relevant to their chain.
However, care should be taken to keep its size to minimum to avoid inflating on-chain storage size by eg.
linking to off-chain storage for bulkier data:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">pub struct </span>BlockProducerMetadataType {
    <span class="kw">pub </span>url: BoundedString&lt;MaxUrlLength&gt;,
    <span class="kw">pub </span>hash: SizedByteString&lt;<span class="number">32</span>&gt;,
}</code></pre></div>
<p>Once the metadata type is defined, the pallet can be added to the runtime and should be configured. This
requires providing types used in the runtime along with logic to get the:</p>
<ul>
<li>Partner Chain’s genesis UTXO</li>
<li>starting timestamp of the current slot</li>
</ul>
<p>For example, a chain that uses <code>pallet_timestamp</code> for its consensus may define a configuration like this:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">impl </span>pallet_block_producer_metadata::Config <span class="kw">for </span>Runtime {
    <span class="kw">type </span>WeightInfo = pallet_block_producer_metadata::weights::SubstrateWeight&lt;Runtime&gt;;

    <span class="kw">type </span>BlockProducerMetadata = BlockProducerMetadata;
	<span class="kw">type </span>Currency = Balances;
    <span class="kw">type </span>HoldAmount = MetadataHoldAmount;
    <span class="kw">type </span>RuntimeHoldReason = RuntimeHoldReason;

    <span class="kw">fn </span>genesis_utxo() -&gt; sidechain_domain::UtxoId {
        Sidechain::genesis_utxo()
    }

    <span class="kw">fn </span>current_time() -&gt; u64 {
    	pallet_timestamp::Now::&lt;Runtime&gt;::get()
    }
}</code></pre></div>
<p>where the <code>SLOT_DURATION</code> constant is the same as was passed to the Aura configuration, and <code>Sidechain</code>
is the <code>pallet_sidechain</code>.</p>
<p>Note here, that we are using weights already provided with the pallet in the example. These weights were
generated for a setup identical to the example. Chains that use different implementations of <code>current_time</code>
should use their own benchmarks.</p>
<p><code>Currency</code>, <code>HoldAmount</code>, and <code>RuntimeHoldReason</code> types are required to configure the deposit mechanism
for occupying storage.</p>
<p>At this point, the pallet is ready to be used.</p>
<h4 id="signing-command"><a class="doc-anchor" href="#signing-command">§</a>Signing command</h4>
<p>To ensure that only the block producer is able to update their own metadata, a signature is required by the
pallet’s extrinsic. To make it easy for PC Builders to provide their users with a signing utility, the
<code>cli_commands</code> crate includes a command for signing the appropriate message. Consult the crate’s own
documentation for more details.</p>
<h4 id="benchmarking"><a class="doc-anchor" href="#benchmarking">§</a>Benchmarking</h4>
<p>See documentation of benchmarking module.</p>
<h4 id="rpc"><a class="doc-anchor" href="#rpc">§</a>RPC</h4>
<p>See documentation of <code>pallet_block_producer_metadata_rpc</code> crate.</p>
<h3 id="usage---pc-users"><a class="doc-anchor" href="#usage---pc-users">§</a>Usage - PC Users</h3>
<p>This pallet exposes two extrinsics: <a href="pallet/struct.Pallet.html#method.upsert_metadata" title="associated function pallet_block_producer_metadata::pallet::Pallet::upsert_metadata">upsert_metadata</a> and <a href="pallet/struct.Pallet.html#method.delete_metadata" title="associated function pallet_block_producer_metadata::pallet::Pallet::delete_metadata">delete_metadata</a> for current or prospective block producers to add or
update their metadata. These extrinsics requires a valid signature, which the user should prepare using the
<code>sign-block-producer-metadata</code> command provided by the chain’s node. This command returns the signature
and the metadata encoded as hex bytes (in case of upsert).</p>
<p>When metadata is inserted for the first time, a deposit is held from the caller’s account. This account becomes
the owner of the metadata and is the only one allowed to update or delete it. Updates to existing
metadata do not require additional deposits. Deleting metadata will release the deposit to the account that
originally provided it.</p>
<p>After the signature has been obtained, the user should submit the <a href="pallet/struct.Pallet.html#method.upsert_metadata" title="associated function pallet_block_producer_metadata::pallet::Pallet::upsert_metadata">upsert_metadata</a> extrinsic (eg. using PolkadotJS)
providing:</p>
<ul>
<li><strong>metadata value</strong>: when using PolkadotJS UI, care must be taken to submit the same values that were passed to the CLI</li>
<li><strong>signature</strong>: returned by the CLI</li>
<li><strong>cross-chain public key</strong>: corresponding to the private key used for signing with the CLI</li>
<li><strong>valid-before</strong>: timestamp returned by the CLI. This value can not be changed and defines the time range
during which the signature is valid.</li>
</ul>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt><code>pub use <a class="mod" href="pallet/index.html" title="mod pallet_block_producer_metadata::pallet">pallet</a>::*;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="pallet/index.html" title="mod pallet_block_producer_metadata::pallet">pallet</a></dt><dd>The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</dd><dt><a class="mod" href="weights/index.html" title="mod pallet_block_producer_metadata::weights">weights</a></dt><dd>Autogenerated weights for pallet_block_producer_metadata</dd></dl><script type="text/json" id="notable-traits-data">{"&'static [u8]":"<h3>Notable traits for <code>&amp;[<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>]</code></h3><pre><code><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/std/io/trait.Read.html\" title=\"trait std::io::Read\">Read</a> for &amp;[<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>]</div>","Vec<u8>":"<h3>Notable traits for <code><a class=\"struct\" href=\"https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>, A&gt;</code></h3><pre><code><div class=\"where\">impl&lt;A&gt; <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.u8.html\">u8</a>, A&gt;<div class=\"where\">where\n    A: <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/alloc/trait.Allocator.html\" title=\"trait core::alloc::Allocator\">Allocator</a>,</div></div>"}</script></section></div></main></body></html>