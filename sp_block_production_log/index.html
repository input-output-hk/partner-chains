<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Primitives and support crate for `pallet_block_production_log`."><title>sp_block_production_log - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="sp_block_production_log" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0-nightly (1bbd62e54 2025-05-29)" data-channel="nightly" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../sp_block_production_log/index.html">sp_<wbr>block_<wbr>production_<wbr>log</a><span class="version">1.7.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#usage" title="Usage">Usage</a><ul><li><a href="#adding-to-the-node" title="Adding to the node">Adding to the node</a></li></ul></li></ul><h3><a href="#structs">Crate Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#traits" title="Traits">Traits</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>sp_block_production_log</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/sp_block_production_log/lib.rs.html#1-175">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Primitives and support crate for <code>pallet_block_production_log</code>.</p>
<p>This crate defines the primitive types and the inherent data provider for the block production log feature.</p>
<h3 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h3>
<p>This crate supports operation of <code>pallet_block_production_log</code>.
Consult the pallet’s documentation on how to include it in the runtime.</p>
<h4 id="adding-to-the-node"><a class="doc-anchor" href="#adding-to-the-node">§</a>Adding to the node</h4><h5 id="implementing-the-runtime-api"><a class="doc-anchor" href="#implementing-the-runtime-api">§</a>Implementing the runtime API</h5>
<p>The block production log feature requires <a href="trait.BlockProductionLogApi.html" title="trait sp_block_production_log::BlockProductionLogApi">BlockProductionLogApi</a> to be implemented by the Partner Chain runtime
so the current block author can be identified. The concrete implementation must use or match the mechanism of
block author selection used by the particular Partner Chain’s consensus mechanism. The API should use the same
type <code>CommitteeMember</code> to represent the block author as was configured in pallet’s configuration.</p>
<p>An example for a Partner Chain using Aura consensus looks like this:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="macro">impl_runtime_apis!</span> {
    <span class="kw">impl </span>BlockProductionLogApi&lt;Block, CommitteeMember&gt; <span class="kw">for </span>Runtime {
        <span class="kw">fn </span>get_author(slot: Slot) -&gt; <span class="prelude-ty">Option</span>&lt;CommitteeMember&gt; {
            SessionCommitteeManagement::get_current_authority_round_robin(<span class="kw-2">*</span>slot <span class="kw">as </span>usize)
        }
    }
}</code></pre></div>
<p>using the <code>pallet_session_committee_management::Pallet::get_current_authority_round_robin</code> function
which performs the same round-robin author selection that Aura does internally.</p>
<h5 id="adding-the-inherent-data-provider"><a class="doc-anchor" href="#adding-the-inherent-data-provider">§</a>Adding the inherent data provider</h5>
<p>The inherent data provider should be added to the node’s <code>CreateInherentDataProviders</code> implementation for
both proposal and validation of blocks.  eg.:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="comment">// Create the inherent data provider. `slot` must be the slot number of the block currently being produced/verified
</span><span class="kw">let </span>block_author_idp = BlockAuthorInherentProvider::new(client.as_ref(), parent_hash, slot)<span class="question-mark">?</span>;
...
<span class="comment">// Return the inherent data provider together with other IDPs
</span><span class="prelude-val">Ok</span>((timestamp_idp, slot_idp, ..., block_author_idp, ...))</code></pre></div>
<p>The inherent data provider created using <code>BlockAuthorInherentProvider::new</code> will check whether <code>BlockProductionLogApi</code>
is available in the runtime and will only provide inherent data if the API is present.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.BlockAuthorInherentProvider.html" title="struct sp_block_production_log::BlockAuthorInherentProvider">Block<wbr>Author<wbr>Inherent<wbr>Provider</a></dt><dd>Inherent data provider providing the block author of the current block
Type parameters:</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.InherentError.html" title="enum sp_block_production_log::InherentError">Inherent<wbr>Error</a></dt><dd>Error type used for failing calls of the block production log feature’s inherent.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.INHERENT_IDENTIFIER.html" title="constant sp_block_production_log::INHERENT_IDENTIFIER">INHERENT_<wbr>IDENTIFIER</a></dt><dd>Inherent identifier used by the Block Production Log pallet</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.BlockProductionLogApi.html" title="trait sp_block_production_log::BlockProductionLogApi">Block<wbr>Production<wbr>LogApi</a></dt><dd>Runtime API exposing data required for the <a href="struct.BlockAuthorInherentProvider.html" title="struct sp_block_production_log::BlockAuthorInherentProvider">BlockAuthorInherentProvider</a> to operate.
Type parameters:</dd></dl></section></div></main></body></html>